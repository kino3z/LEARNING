对于所有的询问，有一个值域求和的问题。

对于答案状态有限，且要求和的问题。

都可以尝试枚举答案进行计数，然后求和。

链表作为并查集的作用。

对边权从小到大$sort$一次。

然后按照最小生成树的思路，从小到大加边。特殊来说，加边是加“权值为$x$的所有边”。对于每一次加边，合并边的两点所在的并查集。并且维护一个链表，链表支持快速合并，对于每一个并查集建立一个链表。假如说存在一个并查集的大小大于$t$了，就把链表中所有点的值更新。这里链表的意义是“没有更新过的节点”。



在思路进行$dfs$的时候，把$dfs$到当前位置的所有条件，思维，都写下来。对着纸去写。每一次向下思考的时候都照应前面的所有条件。



区间数的个数。

之前有一个思路，窝已经初始化完毕了前$i​$棵主席树，更新$i + 1​$棵的时候，如果更新的值为$x​$，而$i - 1​$的值域上已经有$x​$了，那么就不添加这个$x​$。这样可以保证询问是区间的前缀的正确性。按照这个思路进行拓展。在更新$i + 1​$棵主席树的时候，假如说第$i​$棵主席树已经有$x​$了，那我把$i​$的$x​$置为$0​$，$i + 1​$棵的$x​$置为$1​$。根据之前的思路，以$i + 1​$为右端点的询问一定是正确的。所以我们考虑离线，对询问进行排序，然后边更新边回答询问。

> http://acm.hdu.edu.cn/showproblem.php?pid=5919

>  POJ 2104 HDU 4417 luogu 3101 求区间不同数个数 hdu 5919   

